<% content_for :heading_class, "pb-0" %>

<% content_for :heading do %>
  <h1><%= t "diary_entries.comments.heading_html", :user => link_to(@user.display_name, user_path(@user)) %></h1>
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <%= link_to t("diary_entries.comments.for_diary"), diary_comments_path(@user), :class => "nav-link" %>
    </li>
    <li class="nav-item">
      <a class="nav-link active"><%= t "diary_entries.comments.for_history" %></a>
    </li>
  </ul>
<% end %>

<% if @comments.empty? %>
  <h4><%= t "diary_entries.comments.no_comments" %></h4>

<% else %>
  <table class="table table-striped" width="100%">
    <thead>
      <tr>
        <th width="25%"><%= t "diary_entries.comments.changeset" %></th>
        <th width="25%"><%= t "diary_entries.comments.when" %></th>
        <th width="50%"><%= t "diary_entries.comments.comment" %></th>
      </tr>
    </thead>
    <% @comments.each do |comment| -%>
    <tr>
      <td width="25%" class="<%= "text-muted" unless comment.visible? %>"><%= link_to comment.changeset.id, changeset_path(comment.changeset) %></td>
      <td width="25%" class="<%= "text-muted" unless comment.visible? %>"><span title="<%= l comment.created_at, :format => :friendly %>"><%= time_ago_in_words(comment.created_at, :scope => :"datetime.distance_in_words_ago") %></span></td>
      <td width="50%" class="richtext text-break<%= " text-muted" unless comment.visible? %>"><%= comment.body.to_html %></td>
    </tr>
    <% end -%>
  </table>

  <%= render "shared/pagination",
             :newer_key => "diary_entries.comments.newer_comments",
             :older_key => "diary_entries.comments.older_comments",
             :newer_id => @newer_comments_id,
             :older_id => @older_comments_id %>
<% end -%>
