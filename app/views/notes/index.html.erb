<% submitted_class = "bg-primary bg-opacity-25" %>

<% content_for :heading do %>
  <h1><%= t ".heading", :user => @user.display_name %></h1>
  <p><%= t ".subheading_html",
           :user => link_to(@user.display_name, @user),
           :submitted => tag.span(t(".subheading_submitted"), :class => "px-2 py-1 #{submitted_class}"),
           :commented => tag.span(t(".subheading_commented"), :class => "px-2 py-1 bg-body") %></p>
<% end %>

<% if @notes.empty? %>
  <h4><%= t ".no_notes" %></h4>

<% else %>
  <%= render :partial => "notes_paging_nav" %>

  <table class="table table-sm note_list">
    <thead>
      <tr>
        <th></th>
        <th><%= t ".id" %></th>
        <th><%= t ".creator" %></th>
        <th><%= t ".description" %></th>
        <th><%= t ".created_at" %></th>
        <th><%= t ".last_changed" %></th>
      </tr>
    </thead>
  <% @notes.each do |note| -%>
    <% cell_class = submitted_class if note.author == @user -%>
    <tr>
      <%= tag.td :class => cell_class do %>
        <% if note.closed? %>
          <%= image_tag("closed_note_marker.png", :alt => "closed", :size => "25x40") %>
        <% else %>
          <%= image_tag("open_note_marker.png", :alt => "open", :size => "25x40") %>
        <% end -%>
      <% end %>
      <%= tag.td link_to(note.id, note), :class => cell_class %>
      <%= tag.td note_author(note.author), :class => cell_class %>
      <%= tag.td note.comments.first.body.to_html, :class => cell_class %>
      <%= tag.td friendly_date_ago(note.created_at), :class => cell_class %>
      <%= tag.td friendly_date_ago(note.updated_at), :class => cell_class %>
    </tr>
  <% end -%>
  </table>

  <%= render :partial => "notes_paging_nav" %>

<% end -%>
